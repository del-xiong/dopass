function write_to_history(a,c,b,d){a||(a=LP_derive_doc());if(!a)return!1;if(!b)return console_log("empty history message"),!1;var e;if(is_user_debug_enabled()){if("undefined"==typeof c||null===c)c="";a={cmd:"debug_checkpoint",docstate:get_docstate(a),url:punycode.URLToASCII(get_doc_location_href(a)),msg:LPJSON.stringify(b)};a.history_cmd=c;if(d)for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);sendBG(a);verbose_log("DEBUG:["+c+"] "+b)}return!0}
function write_error_to_history(a,c,b){a||(a=LP_derive_doc());if(!a)return!1;if(!c||!b||"object"!=typeof b)return console_log("bad Error object"),!1;b=lp_deepCopy(b);is_user_debug_enabled()&&write_to_history(a,"errtrapCS",c,b);return!0}function decision_log(a,c,b){a||(a=LP_derive_doc());return!a?!1:is_user_debug_enabled()?write_to_history(a,"decision",c,b):!0}function is_user_debug_enabled(){return g_isdebug&&!g_isie&&!g_isfirefox}
function info_log(a,c,b){a||(a=LP_derive_doc());return!a?!1:is_user_debug_enabled()?write_to_history(a,"info ",c,b):!0};
